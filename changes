const handleTimeChange = async (option) => {
  if (option.value === "custom") {
    setDropdownOpen(false);
    setCalendarOpen(true);
    return;
  }

  setSelectedTimeLabel(option.label);
  setSelectedTimeValue(option.value);
  setDropdownOpen(false);
  setCalendarOpen(false);
  setPaused(true);

  // Update titles immediately
  updateChartTitles(option.label);

  // Fetch and update data
  try {
    const updatedCharts = await fetchFilteredData(option.value);
    setCharts(updatedCharts);
    setCurrentIndex(0);
  } finally {
    setPaused(false);
  }
};
