const handleTimeChange = async (option) => {
  if (option.value === "custom") {
    setDropdownOpen(false);
    setCalendarOpen(true);
    return;
  }

  setSelectedTimeLabel(option.label);
  setSelectedTimeValue(option.value);
  setDropdownOpen(false);
  setCalendarOpen(false);
  setPaused(true);

  // Fetch using the value directly, not from state
  try {
    const updatedCharts = await fetchFilteredData(option.value);  // <- Use option.value here
    setCharts(updatedCharts);
    setCurrentIndex(0);
  } finally {
    setPaused(false);
  }
};
