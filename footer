import { useState, useEffect } from 'react';
import { fetchLatestAnnouncement } from '../postNewApi'; // adjust the path as needed

export default function Footer() {
  const [clock, setClock] = useState('');
  const [announcement, setAnnouncement] = useState('');

  useEffect(() => {
    const updateClock = () => {
      const now = new Date();
      const date = now.toLocaleDateString('en-GB');
      const time = now.toLocaleTimeString('en-GB');
      setClock(`${date} ${time}`);
    };
    const interval = setInterval(updateClock, 1000);
    updateClock();
    return () => clearInterval(interval);
  }, []);

  useEffect(() => {
    // Fetch the announcement on mount
    (async () => {
      const ann = await fetchLatestAnnouncement();
      setAnnouncement(ann);
    })();
  }, []);

  return (
    <footer className="footer-custom">
      <span className="footer-bold footer-left">EIS INFRA Â© 2025</span>
      {announcement && (
        <div className="footer-announcement-marquee">
          <marquee><span className="footer-bold footer-announcement">{announcement}</span></marquee>
        </div>
      )}
      <span className="footer-bold footer-right" id="clock">{clock}</span>
    </footer>
  );
}
